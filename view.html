<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Research View</title>
    <link rel="stylesheet" href="./src/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&display=swap" rel="stylesheet">
</head>

<body class="view-page">
    <nav>
        <div class="logo">ANTIGRAVITY</div>
        <a href="index.html" class="btn-back">â† Back to List</a>
    </nav>

    <main id="article-container">
        <div style="text-align:center; padding-top:200px; color:#94a3b8;">ë°ì´í„° ë¡œë”© ì¤‘...</div>
    </main>

    <!-- data.jsë¥¼ ì¼ë°˜ ìŠ¤í¬ë¦½íŠ¸ë¡œ ë¨¼ì € ë¡œë“œ (file:// í˜¸í™˜) -->
    <script src="./src/data.js" type="module"></script>

    <script type="module">
        // ES Module import (Vite ê°œë°œ ì„œë²„ + file:// ì–‘ìª½ í˜¸í™˜)
        let PROJECTS;
        try {
            const dataModule = await import('./src/data.js');
            PROJECTS = dataModule.PROJECTS;
            console.log("âœ… ë°ì´í„° ë¡œë“œ ì„±ê³µ:", PROJECTS.length, "ê±´");
        } catch (err) {
            console.error("âŒ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:", err);
            document.getElementById('article-container').innerHTML = `
                <div style="text-align:center; padding-top:200px;">
                    <h2 style="color:#ef4444;">ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨</h2>
                    <p style="color:#94a3b8; margin-top:1rem;">Vite ê°œë°œ ì„œë²„(npm run dev)ë¥¼ í†µí•´ ì ‘ì†í•´ ì£¼ì„¸ìš”.</p>
                    <p style="color:#64748b; font-size:0.8rem; margin-top:0.5rem;">ì˜¤ë¥˜: ${err.message}</p>
                    <a href="index.html" class="btn-primary" style="display:inline-block; margin-top:2rem;">â† ëŒì•„ê°€ê¸°</a>
                </div>
            `;
            throw err; // ì•„ë˜ ì½”ë“œ ì‹¤í–‰ ì¤‘ë‹¨
        }

        // 1. URLì—ì„œ ID íŒŒì‹±
        const params = new URLSearchParams(window.location.search);
        const id = params.get('id');

        // 2. ë°ì´í„° ê²€ìƒ‰
        const project = PROJECTS.find(p => p.id == id);

        // 3. ì˜ˆì™¸ ì²˜ë¦¬
        if (!project) {
            alert('ì˜¬ë°”ë¥´ì§€ ì•Šì€ ì ‘ê·¼ì…ë‹ˆë‹¤. ë©”ì¸ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
            window.location.href = 'index.html';
        } else {
            console.log("ğŸ“„ ë Œë”ë§:", project.title);

            // 4. ë°ì´í„° ë Œë”ë§
            const container = document.getElementById('article-container');
            container.innerHTML = `
                <header class="article-header" style="background-image: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.9)), url('${project.image}')">
                    <div class="header-content">
                        <div class="tags">${project.tags.map(t => `<span class="tag">${t}</span>`).join('')}</div>
                        <h1>${project.title}</h1>
                        <p class="date">Status: ${project.status}</p>
                    </div>
                </header>
                <article class="article-body">
                    ${project.body}
                </article>
                <footer class="article-footer">
                    <p>í¥ë¯¸ë¡œìš´ ì£¼ì œì˜€ë‚˜ìš”?</p>
                    <a href="index.html" class="btn-primary">â† ë‹¤ë¥¸ ë¦¬ì„œì¹˜ ë³´ëŸ¬ê°€ê¸°</a>
                </footer>
            `;
        }
    </script>
</body>

</html>